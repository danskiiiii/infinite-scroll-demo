(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,n){e.exports=n(324)},198:function(e,t,n){},324:function(e,t,n){"use strict";n.r(t);var a=n(68),r=n(69),o=n(109),i=n(110),c=n(114),s=n(111),l=n(115),u=n(1),m=n.n(u),d=n(16),h=n.n(d),f=(n(198),n(15)),p=n(67),v=n.n(p),g=n(112);function b(){return(b=Object(g.a)(v.a.mark(function e(t,n,a){var r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://www.googleapis.com/books/v1/volumes",e.prev=1,e.next=4,fetch("".concat("https://www.googleapis.com/books/v1/volumes","?q=intitle:").concat(t,"&startIndex=").concat(n,"&maxResults=").concat(a,"\n&fields=items(volumeInfo/description,volumeInfo/title,volumeInfo/imageLinks),totalItems"));case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}var E=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleFetchBooks=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=10*n.state.reqestNumber,o=10,i={isLoading:!0};e&&(t=0,o=19,i=Object(r.a)({},i,{hasMore:!0,data:[],reqestNumber:1})),n.setState(Object(r.a)({},i),function(){return function(e,t,n){return b.apply(this,arguments)}(n.state.val,t,o).then(function(e){var t=e.items,r=e.totalItems,o=n.state.data;if(0!==r)if(t){var i=t.length+o.length<r;n.setState(function(e){return{data:t?[].concat(Object(a.a)(e.data),Object(a.a)(t)):e.data,reqestNumber:e.reqestNumber+1,totalItems:r,isLoading:!1,hasMore:i}})}else n.setState({isLoading:!1,hasMore:!1});else n.setState({totalItems:r,isLoading:!1})}).catch(function(){return window.location.reload()})})},n.renderBooks=function(){var e=n.state,t=e.data,a=e.totalItems;return t.length?t.map(function(e,t){return m.a.createElement("div",{key:t},m.a.createElement(f.b,{style:{margin:10}},m.a.createElement(f.c,null,m.a.createElement(f.e,{component:"img",height:"200",src:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"https://www.lonestargrapefruit.com/images/images.jpg",style:{objectFit:"contain"}}),m.a.createElement(f.d,null,m.a.createElement(f.h,{variant:"title"},e.volumeInfo.title),m.a.createElement(f.h,{variant:"caption",color:"textSecondary"},e.volumeInfo.description?e.volumeInfo.description:"No description provided.")))))}):0===a?m.a.createElement(f.h,{color:"error"},"No books were found"):null},n.state={data:[],hasMore:!0,reqestNumber:1,isLoading:!1,val:""},window.onscroll=function(){var e=n.state,t=e.error,a=e.isLoading,r=e.hasMore;t||a||!r||window.innerHeight+document.documentElement.scrollTop>document.documentElement.offsetHeight-400&&n.handleFetchBooks()},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,a=t.hasMore;return m.a.createElement(m.a.Fragment,null,m.a.createElement("section",null,m.a.createElement(f.h,{color:"textPrimary",variant:"h6"},"INFINITE SCROLL DEMO"),m.a.createElement("div",{className:"search-bar"},m.a.createElement(f.g,{onKeyPress:function(t){"Enter"===t.key&&(e.inpRef.blur(),e.handleFetchBooks(!0))},inputRef:function(t){return e.inpRef=t},autoComplete:"off",label:"Enter title",color:"primary",margin:"normal",variant:"outlined",value:this.state.val,onChange:function(t){return e.setState({val:t.target.value})}}),m.a.createElement(f.a,{style:{alignSelf:"center",margin:"10px 0 0 8px"},color:"primary",onClick:function(){return e.handleFetchBooks(!0)}},"search"))),m.a.createElement("div",{className:"cards"},this.renderBooks(),n&&m.a.createElement(f.f,{color:"primary"}),!a&&m.a.createElement(f.h,{style:{margin:50},color:"textPrimary",align:"center",variant:"h5"},"No more items")))}}]),t}(m.a.Component);h.a.render(m.a.createElement(E,null),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.29441336.chunk.js.map